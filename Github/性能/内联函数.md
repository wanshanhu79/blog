### 一、什么是内联函数

内联函数是指用 inline 关键字修饰的函数，内联函数不是在调用时发生控制转移，而是类似于宏替换，在编译时将函数体嵌入在每一个调用处。仅仅是向编译器建议，至于建议的效果则由实现来定义。

内联函数是通过编译器来实现的，而宏则是在预编译的时候替换。



内联函数的特点：

- 1.类似于宏，效果如同键入了函数体的代码

- 2.省去了函数调用的开销，从而提高函数的执行效率

* 3.以牺牲代码空间来节省函数调用时的开销，会增加二进制映象的大小
* 4.在不同的编译选项或者优先等级下，同一个函数的内联结果可能会有所不同

内联函数的使用限制：

* 函数体内简单的函数使用
* 不能包含复杂的结构控制语句例如while、for、switch循环语句
* 本身不能是直接递归函数



内联函数的使用：

**常配合static使用，static inline的内联函数，一般情况下不会产生函数本身的代码，而是全部被嵌入在被调用的地方**。如果不加static，则表示该函数有可能会被其他编译单元所调用，所以一定会产生函数本身的代码。所以加了static，一般可令可执行文件变小。内核里一般见不到只用inline的情况，而都是使用static inline。



ps:实际代码调试，static inline使用时，如果访问方法地址，则产生函数本身的代码。inline单独使用时，声明与实现分开，实现不加inline。(同样的编译配置，static inline 进行了代码替换，而inline和extern inline是普通函数跳转调用)

